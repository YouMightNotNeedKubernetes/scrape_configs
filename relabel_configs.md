# Relabel configuration

The relabel configuration for appending **Kubernetes** compatible labels to the metrics.

## Docker and Docker Compose
|   prometheus    |    promtail     |   kubernetes   |                                                        docker                                                         |                                      docker_cadvisor                                      |                    Note                    |
| :-------------: | :-------------: | :------------: | :-------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------: | :----------------------------------------: |
|   **cluster**   |   **cluster**   |                |                                                                                                                       |                                                                                           | *Only available with multi-tenent enabled* |
| **__replica__** | **__replica__** |                |                                                                                                                       |                                                                                           | *Only available with multi-tenent enabled* |
|                 |                 |                |                                                                                                                       |                                                                                           |                                            |
|  **instance**   |  **__host__**   |                |                                                                                                                       |                                                                                           |                                            |
|     **job**     |     **job**     |                | *__meta_docker_container_label_com_docker_compose_project + __meta_docker_container_label_com_docker_compose_service* | *container_label_com_docker_compose_project + container_label_com_docker_compose_service* |                                            |
|  **namespace**  |  **namespace**  | **namespace**  |                              *__meta_docker_container_label_com_docker_compose_project*                               |                       *container_label_com_docker_compose_project*                        |                                            |
| **deployment**  | **deployment**  | **deployment** |                              *__meta_docker_container_label_com_docker_compose_project*                               |                       *container_label_com_docker_compose_project*                        |                                            |
|     **pod**     |     **pod**     |    **pod**     | *__meta_docker_container_label_com_docker_compose_project + __meta_docker_container_label_com_docker_compose_service* | *container_label_com_docker_compose_project + container_label_com_docker_compose_service* |                                            |
|  **container**  |  **container**  | **container**  |                                          *__meta_docker_container_name(*1)*                                           |                                          *name*                                           |                                            |

## Docker Swarm

|   prometheus    |    promtail     |   kubernetes   |                                          dockerswarm_tasks                                          |                                       dockerswarm_cadvisor                                       |                    Note                    |
| :-------------: | :-------------: | :------------: | :-------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------: | :----------------------------------------: |
|   **cluster**   |   **cluster**   |                |                                                                                                     |                                                                                                  | *Only available with multi-tenent enabled* |
| **__replica__** | **__replica__** |                |                                                                                                     |                                                                                                  | *Only available with multi-tenent enabled* |
|                 |                 |                |                                                                                                     |                                                                                                  |                                            |
|  **instance**   |  **__host__**   |                |                                 *__meta_dockerswarm_node_hostname*                                  |                                                                                                  |                                            |
|     **job**     |     **job**     |                | *__meta_dockerswarm_service_label_com_docker_stack_namespace + __meta_dockerswarm_service_name(*2)* | *container_label_com_docker_stack_namespace + container_label_com_docker_swarm_service_name(*2)* |                                            |
|  **namespace**  |  **namespace**  | **namespace**  |                    *__meta_dockerswarm_service_label_com_docker_stack_namespace*                    |                           *container_label_com_docker_stack_namespace*                           |                                            |
| **deployment**  | **deployment**  | **deployment** |                    *__meta_dockerswarm_service_label_com_docker_stack_namespace*                    |                           *container_label_com_docker_stack_namespace*                           |                                            |
|     **pod**     |     **pod**     |    **pod**     |                                  *__meta_dockerswarm_service_name*                                  |                         *container_label_com_docker_swarm_service_name*                          |                                            |
|  **container**  |  **container**  | **container**  |    *__meta_dockerswarm_service_name + __meta_dockerswarm_task_slot + __meta_dockerswarm_task_id*    |                                              *name*                                              |                                            |
